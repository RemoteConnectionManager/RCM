defaults:
  TOP:
    SCHEDULER :
      Slurm :
        QUEUE :
          gll_all_serial :
            MEMORY :
              min : 1
              max : 16
            CPU :
              max : 2
          gll_usr_prod :
              TIMEOUT: 
                max: 500
          gll_usr_gpuprod :
            substitutions:
              QUEUE_PAR: "-N 1 -n @{CPU} --partition=gll_usr_gpuprod --ntasks-per-node=@{CPU} --mem=@{MEMORY}GB @{GRES_STRING} #from defaults"
              TIMEOUT:
                max: 1000
            MEMORY :
              min : 4
              default: 113
            TIME :
              max : '01:30:00'
            CPU :
              min : 4
              default: 16
            GRES :
              Kepler :
                substitutions :
                  GRES_STRING: "gres=gpu:kepler:1"
              Kepler2 :
                substitutions :
                  GRES_STRING: "gres=gpu:kepler:2"
              None :
                substitutions :
                  GRES_STRING: ""
        substitutions :
          QUEUE.GRES.GRES_STRING: ""
          HEADER: |
            #!/bin/bash
            ## thisc come from defaults slurm_gpu
            #SBATCH --time=@{QUEUE.TIME}
            #SBATCH -A @{ACCOUNT}
            #SBATCH --job-name=@{RCM_SESSIONID}
            #SBATCH --output @{RCM_JOBLOG}
            #SBATCH -N 1 -n @{QUEUE.CPU} --partition=@{QUEUE} --mem=@{QUEUE.MEMORY}GB @{QUEUE.GRES.GRES_STRING} #direct setup
            ###old##SBATCH  @{QUEUE_PAR} #indirect setup
            #
